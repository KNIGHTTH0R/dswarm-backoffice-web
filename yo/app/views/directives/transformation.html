<div>
    <span>{{ internalName }}</span>
    <button class="btn btn-success" type="button" ng-click="sendTransformations()" ng-class="{'disabled':tabs.length == 0}">Run all transformations</button>
    <tabset>
      <tab ng-repeat="tab in tabs" heading="{{ tab.title }}" active="tab.active" select="switchTab(tab)">
        <button class="btn btn-primary" type="button" ng-click="sendTransformation(tab)">Run Transformation</button>
      </tab>
    </tabset>

    <div class="transformation-container">
      <div class="function component function-source"
           ng-show="activeMapping.input_attribute_paths[0]"
           connect-with="{'.function-target': activeMapping.output_attribute_path}"
           connect-when="activeMapping.input_attribute_paths[0]"
           ng-click="onFilterClick(activeMapping.input_attribute_paths[0])">
        <div>
            {{activeMapping}}
          <span>{{ formatAttributePath(activeMapping.input_attribute_paths[0]) }}</span>
        </div>
      </div>
      <ul class="function-sortable" ng-show="showSortable" ng-class="{bigger:!activeMapping._$components.length}">
        <li ng-repeat="component in activeMapping._$components" class="function component"
            ng-class="'function-'+component.componentType" dmp-connectible

            ng-click="onFunctionClick(component)">
          <div ng-switch on="component.componentType">
            <span ng-switch-when="fun">{{ component.payload.name }}</span>
            <span ng-switch-when="source">{{ component.payload.name }}</span>
            <span ng-switch-when="target">{{ component.payload.name }}</span>
            <span ng-switch-default></span>
          </div>
        </li>
      </ul>
      <div class="function component function-target"
           ng-show="activeMapping.output_attribute_path">
        <div>
          <span>{{ formatAttributePath(activeMapping.output_attribute_path) }}</span>
        </div>
      </div>
    </div>
</div>
